# –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø (RBAC)

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–æ–ª–∏ –¥–ª—è —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ API –∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏.

–†–æ–ª–∏:
- STUDENT ‚Äî —Å—Ç—É–¥–µ–Ω—Ç, –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–º—É –ø—Ä–æ—Ñ–∏–ª—é –∏ –ø–æ–¥–∞—á–µ –∑–∞—è–≤–ª–µ–Ω–∏–π
- TEACHER ‚Äî –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–±–æ—Ç–µ —Å –∑–∞—è–≤–ª–µ–Ω–∏—è–º–∏
- STAFF ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —É—á–µ–±–Ω–æ–π —á–∞—Å—Ç–∏, –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏ —Å–æ–±—ã—Ç–∏—è–º–∏
- ADMIN ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã, –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- JWT Bearer: `Authorization: Bearer <token>` ‚Äî —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞ (¬´üîê –ú–æ–π —Ç–æ–∫–µ–Ω¬ª), –¥–µ–π—Å—Ç–≤—É–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è
- –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤): –∑–∞–≥–æ–ª–æ–≤–∫–∏ `X-User-Role` –∏ `X-User-Id` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö (—á–µ—Ä–µ–∑ authenticateToken) –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –î–æ—Å—Ç—É–ø –∫ API

–ü—É–±–ª–∏—á–Ω—ã–µ (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞):
- GET /health
- GET /api/schedule?group=... | ?teacher=... | &day=...
- GET /api/schedule/groups
- GET /api/events[?category=..|?limit=N]
- GET /api/events/:id

–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ª—é–±–æ–π —Ä–æ–ª–∏):
- GET /api/auth/me
- GET /api/students/me
- PATCH /api/students/me
- POST /api/applications (—Å–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–ª–µ–Ω–∏–µ)
- GET /api/applications/:id (—Ç–æ–ª—å–∫–æ —Å–≤–æ—ë –¥–ª—è STUDENT)
- GET /api/applications/student/:studentId (–¥–æ—Å—Ç—É–ø –ø–æ —Å–≤–æ–∏–º –ø—Ä–∞–≤–∞–º)

TEACHER, STAFF, ADMIN:
- GET /api/applications (—Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–ª–µ–Ω–∏–π, —Ñ–∏–ª—å—Ç—Ä—ã)
- PATCH /api/applications/:id/status (—Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞)

STAFF, ADMIN (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º):
- POST   /api/schedule/groups         (—Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É)
- PUT    /api/schedule/groups/:id     (–∏–∑–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É)
- DELETE /api/schedule/groups/:id     (—É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É)
- POST   /api/schedule/teachers       (—Å–æ–∑–¥–∞—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è)
- PUT    /api/schedule/teachers/:id   (–∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è)
- DELETE /api/schedule/teachers/:id   (—É–¥–∞–ª–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è)
- POST   /api/schedule/lessons        (—Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω—è—Ç–∏–µ + —Å–≤—è–∑–∏ —Å –≥—Ä—É–ø–ø–∞–º–∏/–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏)
- PUT    /api/schedule/lessons/:id    (–æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ –∏ —Å–≤—è–∑–∏)
- DELETE /api/schedule/lessons/:id    (—É–¥–∞–ª–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ)

STAFF, ADMIN (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏):
- POST   /api/events
- PUT    /api/events/:id
- DELETE /api/events/:id

ADMIN, STAFF:
- GET /api/users (—Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
- POST /api/users (—Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ä–æ–ª—å—é)
- GET /api/students (—Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏)
- GET /api/admin/db-stats

## –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –°–∞–º–æ—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ POST /api/auth/register –∏ –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–æ–ª–∏ STUDENT.
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ä–æ–ª—å—é TEACHER/STAFF/ADMIN –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ STAFF/ADMIN —á–µ—Ä–µ–∑ POST /api/users.
- –°–µ—Ä–≤–∏—Å—ã –Ω–µ –ø—É–±–ª–∏–∫—É—é—Ç –ø–æ—Ä—Ç—ã –Ω–∞—Ä—É–∂—É ‚Äî –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ docker-—Å–µ—Ç–∏. –î–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ API‚Äë—à–ª—é–∑/Ingress –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π curl‚Äë–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
